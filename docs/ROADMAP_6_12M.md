# NOS 架构与模块优化路线图（6–12 个月）

## 阶段目标
- 分层与边界：`core/subsystems/services/observability/security` 清晰化
- 系统调用优化：快路径、批处理、零拷贝、调度优化的特性化接入
- 观测与治理：度量、健康检查、初始化时间线、性能摘要
- 测试与 CI：特性矩阵、微基准、覆盖率阈值与回归门槛

## 里程碑
### M1（1–2 个月）
- 建立分层门面与兼容层（已完成首版门面）
- 接入特性旗标与分发门控（已完成初始化门控与回退）
- 增强 ProcFS 观测节点（已新增服务/健康/特性/进程/延迟初始化）

### M2（2–4 个月）
- 迁移 `syscalls` 核心与优化实现至 `core/optimizations` 分层
- 对优化路径统一 `#[cfg(feature=...)]` 包裹与文档化使用指南
- 完善服务接口 `traits`（版本/能力/度量钩子）与路由策略

### M3（4–8 个月）
- 引入初始化时间线与性能摘要 `/proc/timeline`、`/proc/perfsummary`
- 微基准覆盖快路径/批处理/零拷贝/调度；CI 输出对比报告
- 依赖地图与越层依赖阻断规则在 CI 生效

### M4（8–12 个月）
- 针对目标负载的策略化调度与隔离
- 跨平台/架构差异化裁剪与打包流程
- 文档与贡献指南完善、运维与脚本规范化

## 成功标准
- 编译与测试在特性矩阵下稳定通过
- 性能基线不低于当前值；开启优化特性后达到预期
- 观测与治理能力完善，回归与异常可快速定位

